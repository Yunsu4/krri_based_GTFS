<!DOCTYPE html>
<html>
<head>
    <title>Trip Search</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="sidebar">
        <h1 style="font-size: 1.5em; margin-bottom: 20px;">경로 검색</h1>
        <form id="searchForm">
            <!-- 출발지 검색 -->
            <div class="search-box">
                <input type="text" id="departure-keyword" placeholder="출발지">
                <button type="button" onclick="searchDeparture()">검색</button>
            </div>
            <div id="departure-result" class="place-list"></div>
            <input type="hidden" name="departure_lat">
            <input type="hidden" name="departure_lon">
            
            <!-- 도착지 검색 -->
            <div class="search-box">
                <input type="text" id="arrival-keyword" placeholder="도착지">
                <button type="button" onclick="searchArrival()">검색</button>
            </div>
            <div id="arrival-result" class="place-list"></div>
            <input type="hidden" name="arrival_lat">
            <input type="hidden" name="arrival_lon">

            <div class="form-group">
                <label>시간:</label>
                <input type="time" name="present_time" required>
            </div>
            
            <div class="taxi-order-buttons">
                <button type="button" class="taxi-btn active" data-value="true">택시 먼저 타기</button>
                <button type="button" class="taxi-btn" data-value="false">택시 나중에 타기</button>
            </div>
            <input type="hidden" name="taxi_first" value="true">
            
            <button type="submit" class="search-submit">경로 검색</button>
            <div class="loading" style="display: none;">경로 탐색 중...</div>
        </form>
        <div class="sort-buttons" style="display: none;">
            <button type="button" class="sort-btn active" data-sort="default">시간순</button>
            <button type="button" class="sort-btn" data-sort="total_journey_time">총 소요시간순</button>
            <button type="button" class="sort-btn" data-sort="taxi_distance">택시 거리순</button>
            <button type="button" class="sort-btn" data-sort="walking_distance">도보 거리순</button>
        </div>
        <div class="result"></div>
    </div>
    
    <!-- 지도를 표시할 div 추가 -->
    <div class="map-container">
        <div id="map"></div>
    </div>

    <!-- JavaScript는 body 끝에 배치 -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=MY_APP_KEY&libraries=services"></script>
    <script type="module" src="{{ url_for('static', filename='js/search.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/map.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/api.js') }}"></script>
</body>
</html>